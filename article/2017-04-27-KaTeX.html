<!doctype html>
<html>
<head>
<meta charset="UTF-8">
<title>
KaTeXを使ってみた感想
</title>


<link rel="stylesheet" type="text/css" href="../css/default.css" >

<style type="text/css">
</style>

<!-- highlight.js -->
<link rel="stylesheet" type="text/css" href="../css/github.css">
<script type="text/javascript" src="../js/highlight.pack.js"></script>
<script type="text/javascript">hljs.initHighlightingOnLoad();</script>

<!-- mathjax CDN -->
<script type="text/javascript" async
  src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML">
</script>


</head>

<body>

<header>
<h1><a href="http://cpplover.blogspot.jp/">本の虫</a></h1>

<p>
著者：江添亮<br>
ブログ: <a href="http://cpplover.blogspot.jp/">http://cpplover.blogspot.jp/</a><br>
メール: boostcpp@gmail.com<br>
Twitter: <a href="https://twitter.com/EzoeRyou">https://twitter.com/EzoeRyou</a><br>
GitHub: <a href="https://github.com/EzoeRyou">https://github.com/EzoeRyou</a>
</p>
<p>
<a href="http://www.amazon.co.jp/registry/wishlist/1X43J4K0NJVHK">アマゾンの江添のほしい物リスト</a>を著者に送るとブログ記事のネタになる
</p>

<p>
筆者にブログのネタになる品物を直接送りたい場合、住所をメールで質問してください。
</p>
</header>


<article>
<h1><a href="https://cpplover.blogspot.jp/2017/04/katex.html">
KaTeXを使ってみた感想
</a></h1>

<p>
ブラウザー上で動いて、texの数式を描画するライブラリには、有名なMathJaxの他に、KaTeXがある。
</p>

<p>
<a href="https://github.com/Khan/KaTeX">Khan/KaTeX: Fast math typesetting for the web.</a>
</p>

<p>
KaTeXにはMathJaxにない様々利点があるが、欠点も多い。
</p>

<p>
マストドンで数式描画をするのにMathJaxの代わりにKaTeXが使えないかと試してみたが、結論から言うと、KaTeXはマストドンで使うのに適さない。
</p>

<p>
KaTeXは以下の用途で使うのに適している。
</p>

<ol>
<li>自分一人、あるいは十分に訓練されて連絡を密に取り合う人間だけで編集された文書</li>
<li>数式に間違いがなく、KaTeXで処理できること</li>
</ol>

<p>
以下のような場合には適さない。
</p>

<ol>
<li>不特定多数の人間が数式を入力する</li>
<li>数式は文法的に誤りを含む可能性がる</li>
</ol>

<p>
KaTeXの利点
</p>

<p>
KaTeXはMathJaxに比較して様々な利点がある。
</p>

<p>
速い。文句なくMathJaxより速い。
</p>

<p>
<a href="http://www.intmath.com/cg5/katex-mathjax-comparison.php">KaTeX and MathJax Comparison Demo</a>
</p>

<p>
実装が軽量で依存がなくWebサイトに組み込みやすい。
</p>

<p>
JavaScriptファイル一つ、CSSファイル一つ、あとはフォントファイルしかない。
</p>

<p>
KaTeXはかなり理想的なのだが、問題がある。
</p>

<p>
数式のパースエラーに非寛容
</p>

<p>
数式がtexの文法違反だったりするとすぐに例外を投げる。例外を無効化もできるが、基本的にパースエラーを出した時点でそれ以上の処理を拒否する。
</p>

<p>
CJK文字に対応していない。
</p>

<p>
これは本当に耐え難い問題だ。我々は$力=質量\times加速度$を書くときは、
</p>

<pre><code>$力=質量\times加速度$
</code></pre>

<p>
と書きたい。しかし、KaTeXはCJK文字に対応していない。
</p>

<p>
一応、\text{}で囲めば使えるらしいが、それは式の意味を買えてしまうし、第一、
</p>


<pre><code>$\text{力}=\text{質量}\times\text{加速度}$
</code></pre>

<p>
とは書きたくない。そもそも意味が変わってしまう。不特定多数のユーザーがいる場合にこれを守らせるのも難しい。それにこうしてもやはりCJK文字の扱いには問題がある。
</p>

<p>
それ以外にも、基本的にエラーを出すと処理を中止するようになっていて、本当に使いづらい。
</p>

<p>
このため、KaTeXはマストドンで使うのに適さない。
</p>



</article>

<footer>
<p>
CC BY-SA 4.0: This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a>.
</p>
</footer>
</body>
</html>
